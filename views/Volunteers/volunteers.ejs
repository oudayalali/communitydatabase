
<!DOCTYPE html>
<html lang="en" title="CHIS">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="icon" type="image/png" href="../volunteers/images/logo-ct.png">
    <title>
      Volunteers
    </title>
    <link rel="icon" href="logo-ct.png">
    <link rel="stylesheet" href="../Volunteers/style.css">
    <link rel="stylesheet" href="../Volunteers/edit.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link
    href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Round|Material+Icons+Sharp|Material+Icons+Two+Tone"
    rel="stylesheet"
  />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
  <link
    href="https://fonts.googleapis.com/css2?family=Foldit:wght@100;200;300;400;500;600;700;800;900&display=swap"
    rel="stylesheet"
  />
</head>

<body>
    <div class="table-container">
    <main class="table">
        <section class="table__header">
            <div class="container">
                <div class="btn">
                    
                    <a href="http://localhost:3000/addvolunteer">Volunteers</a></div>
            </div>
     
            <!-- <div class="input-group">
                <input type="search" id="search" placeholder="Search Data...">
                <img src="images/search.png" alt="">
            </div> -->
            <!-- <div class="export__file">
                <label for="export-file" class="export__file-btn" title="Export File"></label>
                <input type="checkbox" id="export-file">
                <div class="export__file-options">
                    <label>Export As &nbsp; &#10140;</label>
                    <label for="toPDF">PDF <img src="images/pdf.png" alt=""></label>
                    <label for="toEXCEL">EXCEL <img src="images/excel.png" alt=""></label>
                </div>
            </div> -->
        </section>
        <section class="table__body">
            <table>
                <thead>
                    <tr>
                        <th>ID<span class="icon-arrow">&UpArrow;</span></th>
                        <th> First Name <span class="icon-arrow">&UpArrow;</span></th>
                        <th> Last Name <span class="icon-arrow">&UpArrow;</span></th>
                        <th> DOB <span class="icon-arrow">&UpArrow;</span></th>
                        <th> Gender <span class="icon-arrow">&UpArrow;</span></th>
                        <th> Phone Number <span class="icon-arrow">&UpArrow;</span></th>
                        <th> Address <span class="icon-arrow">&UpArrow;</span></th>
                        <th> Nationality <span class="icon-arrow">&UpArrow;</span></th>
                        <th> Supervisor <span class="icon-arrow">&UpArrow;</span></th>
                        <th> Start Date <span class="icon-arrow">&UpArrow;</span></th>
                        <th> End Date <span class="icon-arrow">&UpArrow;</span></th>
                        <th></th>
                   
                    </tr>
                </thead>
                <tbody id="clubs-data">
                    
                   

                    <tr>
                      <% data.forEach(item => { %>
                        <tr>
                          <td><%= item.VolunteerId %></td>
                          <td><%= item.FirstName %></td>
                          <td><%= item.LastName %></td>
                          <td><%= item.DateOfBirth %></td>
                          <td><%= item.Gender %></td>
                          <td><%= item.PhoneNumber %></td>
                          <td><%= item.Adress %></td>
                          <td><%= item.Nationality %></td>
                          <td><%= item.Supervisor %></td> 
                          <td><%= item.StartDate %></td>
                          <td><%= item.EndDate %></td>
                          <td>
                            <button data-modal-target="#modal" data-id="<%= item.VolunteerId %>" class="row-button">
                              Edit
                            </button>
                          <div class="modal" id="modal">
                              <div class="container1">
                                <div class="title">Edit Volunteers</div>
                                <div class="content">
                                  <form id="edit-form" method="post">
                                    <div class="user-details">
                                      <div class="input-box">
                                        <span class="details">First Name</span>
                                        <input type="text" placeholder="Enter First name" name="FirstName" required>
                                      </div>
                                      <div class="input-box">
                                        <span class="details">Last Name</span>
                                        <input type="text" placeholder="Enter last name"  name="LastName" required>
                                      </div>
                                      <div class="input-box">
                                        <span class="details">Father Name</span>
                                        <input type="text" placeholder="Enter father name"  name="MiddleName" required>
                                      </div>
                                      <div class="input-box">
                                        <span class="details">Mother Name</span>
                                        <input type="text" placeholder="Enter mother name" required>
                                      </div>
                                      <div class="input-box">
                                        <span class="details">First Name(Arabic)</span>
                                        <input type="text" placeholder="Enter first name" required>
                                      </div>
                                      <div class="input-box">
                                        <span class="details">Last Name(Arabic)</span>
                                        <input type="text" placeholder="Enter last name" required>
                                      </div>
                                      <div class="input-box">
                                        <span class="details">Father Name(Arabic)</span>
                                        <input type="text" placeholder="Enter father name" required>
                                      </div>
                                      <div class="input-box">
                                        <span class="details">Mother Name(Arabic)</span>
                                        <input type="text" placeholder="Enter mother name" required>
                                      </div>
                                      
                                      <div class="input-box">
                                        <span class="details">Date of Birth</span>
                                        <input type="date" placeholder="Enter birth date" name="DateOfBirth" required>
                                    </div>
                                    
                                    <div class="input-box">
                                      <span class="details">Phone Number</span>
                                      <input type="text" placeholder="Enter number"  name="PhoneNumber" required>
                                    </div>
                            
                                    <div class="input-box">
                                      <span class="details">Address</span>
                                      <input type="text" placeholder="Enter address" name="Adress" required>
                                    </div>
                                    
                                    <div class="wrapper" id="wrapper">
                                      <div class="input-box" id="input-box"><span class="details">Nationality</span></div>
                                      <div class="select-btn" id="select-btn">
                                        <span id="NatLabel" >Select a Nationality</span>
                                        <i class="uil uil-angle-down"></i>
                                      </div>
                                      <div class="content-dropdown">
                                        <div class="search">
                                          <i class="uil uil-search"></i>
                                          <input spellcheck="false" type="text" id="input" name="Nationality" placeholder="Search">
                                        </div>
                                        <ul class="options" id="options"></ul>
                                      </div>
                                    </div>
                            
                                    <div class="wrapper" id="wrapper1">
                                      <div class="input-box" id="input-box1"><span class="details">Supervisor</span></div>
                                      <div class="select-btn" id="select-btn1">
                                        <span id="SupLabel">Select a Supervisor</span>
                                        <i class="uil uil-angle-down"></i>
                                      </div>
                                      <div class="content-dropdown">
                                        <div class="search">
                                          <i class="uil uil-search"></i>
                                          <input spellcheck="false" type="text" id="input1" name="Supervisor" placeholder="Search">
                                        </div>
                                        <ul class="options" id="options1"></ul>
                                      </div>
                                    </div>
                            
                            
                            
                                    <div class="input-box">
                                      <span class="details">Start Date</span>
                                      <input type="date" placeholder="Enter start date" name="StartDate" required>
                                  </div>
                            
                            
                                  <div class="input-box">
                                    <span class="details">End Date</span>
                                    <input type="date" placeholder="Enter end date" name="EndDate" required>
                                </div>
                            
                                                                
                                    <div class="gender-details">
                                        <input type="radio" name="Gender" value="Male" id="dot-1">
                                      <input type="radio" name="Gender" value="Female" id="dot-2">
                                      <span class="gender-title">Gender</span>
                                      <div id="genderButton" class="category">
                                        <label for="dot-1">
                                        <span class="dot one"></span>
                                        <span class="gender">Male</span>
                                      </label>
                                      <label for="dot-2">
                                        <span class="dot two"></span>
                                        <span class="gender">Female</span>
                                      </label>
                                      </div>
                                     
                                    </div></div>
                          
                                      <div class="button">
                                        <input type="submit" value="Edit">
                                      </div>
                                    </form>
                                  </div>
                                </div>
                          
                          
                              </div>
                            </div>
                            <div id="overlay"></div>
                        
                        </td>
                        

                    </tr>

                    <% }); %>
                </tbody>
        </section>
    </main>
    <script> 
 
    const data = JSON.parse('<%- JSON.stringify(data) %>');
     const editButtons = document.querySelectorAll('.row-button');
    editButtons.forEach(button => {
     button.addEventListener('click', () => {
       const volunteerId = button.getAttribute('data-id');
 
       const volunteer = data.find(p => p.VolunteerId=== parseInt(volunteerId));

       populateEditForm(volunteer);
       
  
      });
  
    });
    // Edit each record in the table
    function populateEditForm(volunteer) {
    if (volunteer) {
      const editForm = document.getElementById('edit-form');
      //Gender
      const maleRadio = document.getElementById("dot-1");
      const femaleRadio = document.getElementById("dot-2");

        if (volunteer.Gender === "Male") {
      maleRadio.checked = true;
      femaleRadio.checked = false;
    } else if (volunteer.Gender === "Female") {
      maleRadio.checked = false;
      femaleRadio.checked = true;
    }
      
     

      // FirstName LastName Mname DOB PhNbr
      editForm.querySelector('[name="FirstName"]').value = volunteer.FirstName;
      editForm.querySelector('[name="LastName"]').value = volunteer.LastName;
      editForm.querySelector('[name="MiddleName"]').value = volunteer.MiddleName;
      editForm.querySelector('[name="PhoneNumber"]').value = volunteer.PhoneNumber;
      editForm.querySelector('[name="DateOfBirth"]').value =volunteer.DateOfBirth;
      editForm.querySelector('[name="StartDate"]').value =volunteer.StartDate;
      editForm.querySelector('[name="EndDate"]').value =volunteer.EndDate;
      editForm.querySelector('[name="Adress"]').value =volunteer.Adress;
       //if nationality not selected
       editForm.querySelector('[name="Nationality"]').value=volunteer.Nationality;
       editForm.querySelector('[name="Supervisor"]').value=volunteer.Supervisor;
       //Nationality
        document.getElementById('NatLabel').innerText=volunteer.Nationality;
        document.getElementById('SupLabel').innerText=volunteer.Supervisor;
        document.getElementById("options").addEventListener("click",()=>{
       editForm.querySelector('[name="Nationality"]').value  =document.getElementById("select-btn").innerText
      })

      document.getElementById("options1").addEventListener("click",()=>{
       editForm.querySelector('[name="Supervisor"]').value  =document.getElementById("select-btn1").innerText
      })
      //Post
      editForm.setAttribute('action', `http://localhost:3000/api/volunteer/update/${volunteer.VolunteerId}`); 
          
    }
  };
    
  
    
    </script>
    
    <script src="../Volunteers/script.js"></script>
    
</body>
</div>
</html>